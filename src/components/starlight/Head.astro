---
import type { Props } from '@astrojs/starlight/props';
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import VtbotStarlight from 'astro-vtbot/components/starlight/Base.astro';
import ReloadFence from '../bot/ReloadFence.astro';
import LoadingIndicator from 'astro-vtbot/components/LoadingIndicator.astro';
import PageOffset from 'astro-vtbot/components/PageOffset.astro';

import MarkHeadings from '../bot/MarkHeadings.astro';
import MarkTitle from '../bot/MarkTitle.astro';
import OrderedPages from '../bot/OrderedPages.astro';
import SilentCatch from '../bot/SilentCatch.astro';
import SwapSound from '../bot/SwapSound.astro';
import PagefindToTextFragments from './PagefindToTextFragments.astro';
import 'astro-vtbot/components/ReplacementSwap.astro';
import 'astro-vtbot/components/starlight/StarlightConnector.astro';
import SidebarSelect from './SidebarSelect.astro';

import '../../styles/vt.css';
import '../../styles/ec.s8bdm.css';
import AutoCollapseToggle from '../bot/AutoCollapseToggle.astro';
import AutoCollapse from '../bot/AutoCollapse.astro';
---

<VtbotStarlight {...Astro.props} retainCurrentPageMarker>
	<StarlightHead {...Astro.props}><slot /></StarlightHead>
</VtbotStarlight>

<LoadingIndicator top="80px" right="16px" src="/favicon.svg" />
<PageOffset name="main" />

<OrderedPages prefix="/jotter/" />
<MarkHeadings prefix="/jotter/" />
<MarkTitle prefix="/jotter/" />

<SwapSound src="/camera-shutter-199580.mp3" />
<SilentCatch />

<ReloadFence prefix="/jotter/" />

<SidebarSelect />
<AutoCollapseToggle />
<AutoCollapse />
<PagefindToTextFragments />

<script>
	import { TRANSITION_AFTER_SWAP } from 'astro:transitions/client';
	import '../navigate';
	import '@feelback/js/auto';
	document.addEventListener(TRANSITION_AFTER_SWAP, () => window.feelback?.setupFeelback());
</script>
