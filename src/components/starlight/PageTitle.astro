---
import type { Props } from '@astrojs/starlight/props';
import StarlightPageTitle from '@astrojs/starlight/components/PageTitle.astro';
import LastUpdated from '@astrojs/starlight/components/LastUpdated.astro';
import { customSwing } from 'astro-vtbot/animations/swing';
import AnimationStyle from 'astro-vtbot/animations/AnimationStyle.astro';

const swingScope = customSwing('head-last-update', {
	keyframes: { axis: { y: 1 }, angle: { leave: '90deg', enter: '-90deg' } },
	base: { duration: '1000ms' },
	extensions: {
		forwards: {
			old: { 'transform-origin': 'center left' },
			new: { 'transform-origin': 'center right', 'animation-delay': '0.5s' },
		},
		backwards: {
			old: { 'transform-origin': 'center right' },
			new: { 'transform-origin': 'center left', 'animation-delay': '0.5s' },
		},
	},
});
---

<span id="vtbot-head-last-update" data-astro-transition-scope={swingScope}><LastUpdated {...Astro.props} /></span>
<StarlightPageTitle {...Astro.props}><slot /></StarlightPageTitle>
<AnimationStyle name="head-last-update" />

<style is:global>
	#vtbot-head-last-update	  {
		color: gray;
	}
</style>
<style is:global>
	::view-transition-image-pair(head-last-update) {
		perspective: 50cm;
	}
</style>
